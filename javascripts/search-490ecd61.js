$.ajax({url:"/confidant/search/lunr-index.json",cache:!0,method:"GET",success:function(e){lunrData=e,lunrIndex=lunr.Index.load(lunrData.index)}}),$(function(){var e=$("#searchbox"),n=e.hasClass("bottom-search")?{my:"left bottom-11",at:"left top",collision:"flip"}:{};e.autocomplete({source:function(e,n){if(null==lunrIndex)return void console.warn("Index not yet loaded");console.warn(e);var o=_(lunrIndex.search(e.term)).take(50).pluck("ref").map(function(e){return console.warn(e),lunrData.docs[e]}).value();0==o.length&&(o=[{noresults:!0}]),n(o)},select:function(e,n){n.item.noresults||(window.location.href=n.item.url)},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")},position:n}).autocomplete().data("ui-autocomplete")._renderItem=function(e,n){var o=n.noresults?'<span class="noresults">No results found</span>':'<a href="'+n.url+'">'+n.title+"</a>";return $(this.menu.element).toggleClass("noresults",!!n.noresults),$("<li>").append(o).appendTo(e)}});