$.ajax({url:"/confidant/search/lunr-index.json",cache:!0,method:"GET",success:function(n){lunrData=n,lunrIndex=lunr.Index.load(lunrData.index)}}),$(function(){var n=$("#searchbox"),e=n.hasClass("bottom-search")?{my:"left bottom-11",at:"left top",collision:"flip"}:{};n.autocomplete({source:function(n,e){if(null==lunrIndex)return void console.warn("Index not yet loaded");console.warn(n);var o=_(lunrIndex.search(n.term)).take(50).pluck("ref").map(function(n){return console.warn(n),lunrData.docs[n]}).value();0==o.length&&(o=[{noresults:!0}]),e(o)},select:function(n,e){e.item.noresults||(window.location.href=e.item.url)},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")},position:e}).autocomplete().data("ui-autocomplete")._renderItem=function(n,e){var o=e.noresults?'<span class="noresults">No results found</span>':'<a href="/confidant'+e.url+'">'+e.title+"</a>";return $(this.menu.element).toggleClass("noresults",!!e.noresults),$("<li>").append(o).appendTo(n)}});